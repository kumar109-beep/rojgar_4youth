{% load static %}
<!DOCTYPE html>
<html>

<head>
    <title>Mera Rojgar</title>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="{% static 'images/fav.png' %}" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="">
    <meta name="robots" content="index, follow">
    <meta name="description" content="" />

    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
        integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/custom.css' %}">
    <style>
        body {
            min-height: 100vh;
        }

        .sticky-footer {
            position: sticky;
            top: 100%;
        }
    </style>

</head>

<body>
    <div class="ovrlay"></div>
    <header>
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-12">
                    <a href="{% url 'home' %}" class="brand"><img src="{% static 'images/logo.png' %}"></a>
                    <a href="javascript:;" class="toggle-menu  float-right mt-3  "><i
                            class="fa fa-bars  x d-inline-block d-md-none"></i></a>
                </div>
                <div class="col-md-9 text-right sidebar-menu">
                    <a href="javascript:;" class="d-block d-md-none closee">X</a>
                    <ul>
                        <li><a href="{% url 'home' %}" class="active">Home</a></li>
                        <li><a href="{% url 'about' %}">About Mera Rojgar</a></li>
                        <li><a href="{% url 'product_catalog' %}">Product Catalog</a></li>
                        <li><a href="{% url 'contact' %}">Contact Us</a></li>
                        {% if request.session.userID %}
                        <!-- <li><a href="{% url 'logout' %}">Logout</a></li> -->
                        <li><a href="{% url 'cart' %}"
                                style="border:0px solid #ff5a10b3;color:#ff5a10b3;padding: 3px 5px;border-radius:10px;"><i
                                    class="fas fa-shopping-cart"></i>&nbsp; {% if cartLength == 0 %} 0
                                {% else %}{{cartLength}}{% endif %}</a></li>
                        <div class="btn-group ml-2">
                            <span type="button" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                <i class="fas fa-user" style="color:#ff5a10b3;font-size: large;"></i>
                                <!-- {{request.session.username}} -->
                            </span>
                            <div class="dropdown-menu">
                                <a class="dropdown-item mt-2" href="{% url 'customer_info' %}"><i
                                        style="color:#ff5a10b3;" class="fas fa-user-circle"></i>&nbsp;&nbsp;&nbsp; <small><strong>My
                                            Profile</strong></small></a>
                                <a class="dropdown-item mt-2" href="{% url 'wishlist' %}"><i style="color:#ff5a10b3;"
                                        class="fas fa-heart"></i>&nbsp;&nbsp;&nbsp; <small><strong>My Wishlist</strong></small></a>
                                <a class="dropdown-item mt-2" href="{% url 'customer_orders' %}"><i
                                        style="color:#ff5a10b3;" class="fas fa-shopping-bag"></i>&nbsp;&nbsp;&nbsp;
                                    <small><strong>My Orders</strong></small></a>
                                <a class="dropdown-item mt-2" href="{% url 'customer_address' %}"><i
                                        style="color:#ff5a10b3;" class="fas fa-map-marker-alt"></i>&nbsp;&nbsp;&nbsp;
                                    <small><strong>My Address</strong></small></a>
                                <hr>
                                <a class="dropdown-item" href="{% url 'logout' %}"><i style="color:#ff5a10b3;"
                                        class="fas fa-sign-out-alt"></i>&nbsp;&nbsp;&nbsp; <small><strong>Logout</strong></small></a>
                            </div>
                        </div>
                        <!-- <li style=''><a href="{% url 'customer_info' %}" class="btn btn-primary"
								style='font-size: smaller;background-color: #ff5a10b3;color: white;border:2px solid white;cursor: pointer;border-radius:10px;'>
								{{request.session.username}} &nbsp;<i class="fas fa-user"
									style='font-size: large;color: white;cursor: pointer;'></i></a></li> -->
                        {% else %}
                        <li><a href="{% url 'login' %}">Login</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>

        </div>
    </header>
    {% comment %} <div class="page-header-small ">
        <div class="container">
            <div class="row">
                <div class="col-md-12  ">
                    <h4 id='customerEntryType' style='font-weight:800;'>Address Details</h4>
                </div>
            </div>
        </div>
    </div> {% endcomment %}
    <div class="main section products">
        <div class="container" id='login_section_container' style='display:;'>
            <div class="row">
                <div class="col-lg-12 ">
                    <!-- <a style='color:white;' href="{% url 'customer_orders' %}" class="btn btn-sm btn-danger">My
                        Orders</a> -->
                    <!-- <a style='color:white;' href="{% url 'customer_address' %}" class="btn btn-sm btn-warning">My Address</a> -->
                </div>
                <!-- <div class="col-lg-12">
                    <p style="font-size: 10px;">** Click on address to update</p><br>
                    
                </div> -->

                <div class="col-lg-12 mt-2">
                    <div class="form-group">
                        <!-- <button class="btn btn-sm btn-secondary"  data-toggle="modal" data-target="#exampleModalCenter2">Update Address</button> -->
                        <button class="btn btn-sm btn-outline-primary" data-toggle="modal"
                            data-target="#exampleModalCenter" style='width:100%;text-align:left;' data-backdrop="static"
                            data-keyboard="false">&nbsp;&nbsp;+ Add A
                            New Address</button>
                    </div>
                    <hr>
                </div>

                {% for i in res %}
                <div class="col-lg-4">
                    <div class="form-group">
                        <div class="mb-1" style="border-right:1px solid rgb(230, 224, 224);border-radius: 0px;">
                            <div class="text-right mr-2 mt-1">
                                <label><strong title="edit address"
                                        style="text-decoration:;cursor:pointer;color: rgb(28, 144, 211);" id='{{i.id}}'
                                        onclick='getAddress(this)'><i
                                            class="fas fa-edit"></i></strong></label>&nbsp;&nbsp;
                                <!-- <a class="text-right" title="delete this address" id={{i.id}}
                                    onclick="deleteAddress(this)" style="cursor: pointer;"
                                    title="delete this address"><i class="fas fa-trash"
                                        style="color: rgb(240, 124, 124);"></i></a> -->
                            </div>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>Name : </strong><input type='text'
                                        onkeypress="return /[a-zA-Z0-9:., ]/i.test(event.key)" id='fullname_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.fullname}}'></p>
                            </small>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>Contact : </strong><input type='text'
                                        onkeypress="return /[a-zA-Z0-9:., ]/i.test(event.key)" id='contact_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.contact}}'></p>
                            </small>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>District : </strong><input type='text'
                                        onkeypress="return /[a-zA-Z0-9:., ]/i.test(event.key)" id='district_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.district}}'></p>
                            </small>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>Landmark : </strong><input type='text'
                                        onkeypress="return /[a-zA-Z,. ]/i.test(event.key)" id='landmark_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.landmark}}'></p>
                            </small>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>Address : </strong><input type='text'
                                        onkeypress="return /[a-zA-Z0-9:., ]/i.test(event.key)" id='address_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.address}}'></p>
                            </small>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>State : </strong><input type='text'
                                        onkeypress="return /[a-zA-Z]/i.test(event.key)" id='state_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.state}}'></p>
                            </small>
                            <small style="font-size: small;line-height: normal;">
                                <p class="ml-4"><strong>Pincode : </strong><input type='text'
                                        onkeypress="return /[0-9]/i.test(event.key)" maxlength='6' id='pincode_{{i.id}}'
                                        style='border:1px solid white;width:200px;' value='{{i.pincode}}'></p>
                            </small>
                            <div class="text-right mb-1 mr-1" id="updateCancelBtn_{{i.id}}" style="display: none;">
                                <button class="btn btn-secondary btn-sm" id="{{i.id}}"
                                    onclick="CancelUpdateAddress(this)">Cancel</button>
                                    <button class="btn btn-primary btn-sm" id="{{i.id}}"
                                    onclick="updateAddress(this)">Update</button>
                            </div>
                        </div>
                        <hr>
                    </div>
                </div>
                <hr>
                {% endfor %}
            </div>
        </div>
    </div>


    <footer class="sticky-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 ">
                    <p>© 2021 by 4youths. All right reservered. </p>
                </div>
                <div class="col-md-6 text-center text-md-right ">
                    <p>
                        <strong>Follow us on:</strong> <a href="https://www.facebook.com/4youths.org/"
                            style="margin-right:15px;margin-left:15px"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com/4youthsorg?lang=en" style="margin-right:15px"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.linkedin.com/in/yref/?originalSubdomain=in" style="margin-right:10px"><i
                                class="fab fa-linkedin-in"></i></a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">+ Add New Address</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!-- <div class="col-lg-12 "> -->
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label><strong>Full Name</strong></label>
                                <input type="text" placeholder="" name="userfullname" id='customerfullname'
                                    class="form-control" onkeypress="return /[a-zA-Z ]/i.test(event.key)" value=''
                                    required>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label><strong>Contact</strong></label>
                                <input type="text" placeholder="10 digit mobile number" name="userContact"
                                    id='customerNewcontact' class="form-control" maxlength="10"
                                    onkeypress="return /[0-9]/i.test(event.key)" value='' required>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label><strong>Pincode</strong></label>
                                <input type="text" placeholder="" name="username" id='customerNewPincode'
                                    class="form-control" onkeypress="return /[0-9]/i.test(event.key)" maxlength='6'
                                    value='' onkeyup='getPostalAddress()'>
                            </div>
                        </div>


                        <div class="col-lg-6">
                            <div class="form-group">
                                <label><strong>Landmark</strong></label>
                                <input type="text" placeholder="" name="username" id='customerNewLocation' style=""
                                    class="form-control" onkeypress="return /[a-zA-Z,. ]/i.test(event.key)" value=''
                                    required>
                            </div>
                        </div>


                        <div class="col-lg-6">
                            <div class="form-group">
                                <label><strong>District</strong></label>
                                <input type="text" placeholder="" name="userdistrict" id='customerNewDistrict'
                                    class="form-control" onkeypress="return /[a-zA-Z]/i.test(event.key)" value=''
                                    required>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label><strong>State</strong></label>
                                <!-- <input type="text" placeholder="" name="username" id='customerNewState'
                                        class="form-control" onkeypress="return /[a-zA-Z]/i.test(event.key)" value=''
                                        required> -->
                                <select name="state" id="customerNewState" class="form-control">
                                    <option value="" selected class="d-none">Select State</option>
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                                    <option value="Daman and Diu">Daman and Diu</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Puducherry">Puducherry</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="form-group">
                                <label><strong>Address</strong></label>
                                <input type="text" placeholder="" name="username" id='customerNewAddress'
                                    class="form-control" onkeypress="return /[a-zA-Z0-9:., ]/i.test(event.key)" value=''
                                    required>
                            </div>
                        </div>
                        <!-- </div> -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-primary btn-sm" onclick="addNewAddress()">Add</button>
                    </div>
                </div>
            </div>
        </div>









        <!-- scrips -->
        <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
        <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
        <script type="text/javascript" src="{% static 'js/custom.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/customerAddressInfo.js' %}"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

</body>

<script>
    function showSignUpPage() {
        $('#login_section_container').css('display', 'none');
        $('#signin_section_container').css('display', '');
        $('#customerEntryType').text('');
        $('#customerEntryType').text('New Customer Registration');
    }

    function showLoginPage() {
        $('#signin_section_container').css('display', 'none');
        $('#login_section_container').css('display', '');
        $('#customerEntryType').text('');
        $('#customerEntryType').text('Customer Login');
    }

    function deleteAddress(thisTxt) {
        alert('delete address under development!');
    }



    function getAddress(thisTxt) {
        var id = $(thisTxt).attr('id');
        $('#updateBtn_' + id).css('display', '');
        $('#updateCancelBtn_' + id).css('display', '');


        $('#address_' + id).css('outline', 0);
        $('#address_' + id).css('border-width', '0 0 2px');
        $('#address_' + id).css('border-color', 'black');

        $('#landmark_' + id).css('outline', 0);
        $('#landmark_' + id).css('border-width', '0 0 2px');
        $('#landmark_' + id).css('border-color', 'black');

        $('#state_' + id).css('outline', 0);
        $('#state_' + id).css('border-width', '0 0 2px');
        $('#state_' + id).css('border-color', 'black');

        $('#pincode_' + id).css('outline', 0);
        $('#pincode_' + id).css('border-width', '0 0 2px');
        $('#pincode_' + id).css('border-color', 'black');

        $('#fullname_' + id).css('outline', 0);
        $('#fullname_' + id).css('border-width', '0 0 2px');
        $('#fullname_' + id).css('border-color', 'black');

        $('#contact_' + id).css('outline', 0);
        $('#contact_' + id).css('border-width', '0 0 2px');
        $('#contact_' + id).css('border-color', 'black');

        $('#district_' + id).css('outline', 0);
        $('#district_' + id).css('border-width', '0 0 2px');
        $('#district_' + id).css('border-color', 'black');

    }

    function CancelUpdateAddress(thisTxt) {
        var id = $(thisTxt).attr('id');
        $('#updateBtn_' + id).css('display', 'none');
        $('#updateCancelBtn_' + id).css('display', 'none');


        $('#address_' + id).css('border', '1px solid white');
        $('#address_' + id).css('width', '200px');

        $('#landmark_' + id).css('border', '1px solid white');
        $('#landmark_' + id).css('width', '200px');

        $('#state_' + id).css('border', '1px solid white');
        $('#state_' + id).css('width', '200px');

        $('#pincode_' + id).css('border', '1px solid white');
        $('#pincode_' + id).css('width', '200px');

        $('#fullname_' + id).css('border', '1px solid white');
        $('#fullname_' + id).css('width', '200px');

        $('#contact_' + id).css('border', '1px solid white');
        $('#contact_' + id).css('width', '200px');

        $('#district_' + id).css('border', '1px solid white');
        $('#district_' + id).css('width', '200px');

    }

    function getPostalAddress() {
        var pincode = $('#customerNewPincode').val().trim();
        if (pincode.length == 6) {

            $.ajax({
                type: 'GET',
                url: "https://api.postalpincode.in/pincode/"+pincode,
                success: function (response) {
                    console.log(response);

                    if(response[0]['Status'] == 'Success'){
                        $('#customerNewPincode').css('border','');
                        $('#customerNewPincode').css('color','black');

                        var district = response[0]['PostOffice'][0]['District'];
                        var state = response[0]['PostOffice'][0]['State'];
                        $('#customerNewDistrict').val('');
                        $('#customerNewState').val('');
                        
                        $('#customerNewDistrict').val(district);
                        $('#customerNewState').val(state);
                    }else{
                        $('#customerNewPincode').css('border','2px solid red');
                        $('#customerNewPincode').css('color','red');
                        $('#customerNewDistrict').val('');
                        $('#customerNewState').val('');
                    }
                    
                }
            });
        }else{
            $('#customerNewDistrict').val('');
            $('#customerNewState').val('');
        }
    }
</script>

</html>